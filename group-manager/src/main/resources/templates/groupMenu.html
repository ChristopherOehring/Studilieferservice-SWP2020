<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">

<head>
<meta charset="UTF-8">
<link rel="stylesheet" type="text/css" href="../static/groupmanager/groupMenu.css" th:href="@{/groupmanager/groupMenu.css}"/>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<meta name="viewport"
      content="width=device-width, initial-scale=1, shrink-to-fit=no" />
<link href='https://fonts.googleapis.com/css?family=Roboto' rel='stylesheet'>
<link href='https://fonts.googleapis.com/css?family=Patua One' rel='stylesheet'>
<title>Dashboard</title>
</head>
<body>

    <h1>Dashboard</h1>

    <button class="backButton">
        <a th:href="${'http://' + link + ':9010/web/groupmanager/userMenu'}">
            <img src="../static/groupmanager/imgs/backButton.png" width="30" height="30"
                 th:src="@{/groupmanager/imgs/backButton.png}"/>
            Back
        </a>
    </button>

    <div class="members-bar">
        <div class="memberTitleBox">
            <h2>Members</h2>
        </div> 
        <div class="membersList">
            <table class="memTable">
                <!-- List of Admins -->
                <tr class="memTr"> <!-- TODO: adjust -->
                    <td class="memTd">
                        <img class="image" src="../static/groupmanager/imgs/crown-3-128.png" alt=" " th:src="@{/groupmanager/imgs/crown-3-128.png}">
                    </td>
                    <td class="memTd">
                        <p th:text="${owner.getUserName()}"></p>
                    </td>
                    <td class="memTd">
                        <img class="image" th:if="member.hasSubmitted" src="../static/groupmanager/imgs/checkmark-128.png" alt="" th:src="@{/groupmanager/imgs/checkmark-128.png}">
                    </td>
                </tr>

                <tr class="memTr" th:each="member: ${adminList}"> <!-- TODO: adjust -->
                    <td class="memTd">
                        <img class="image" src="../static/groupmanager/imgs/crown-3-128.png" alt=" " th:src="@{/groupmanager/imgs/crown-3-128.png}">
                    </td>
                    <td class="memTd">
                        <p th:text="${member.getUserName()}"></p>
                    </td>
                    <td class="memTd">
                        <img class="image" th:if="member.hasSubmitted" src="../static/groupmanager/imgs/checkmark-128.png" alt="" th:src="@{/groupmanager/imgs/checkmark-128.png}">
                    </td>
                </tr>

                <!-- List of the other Members -->
                <tr class="memTr" th:each="member: ${memberList}">
                    <td class="memTd">
                        &emsp;
                    </td>
                    <td class="memTd">
                        <p th:text="${member.getUserName()}"></p>
                    </td>
                    <td class="memTd">
                        <img class="image" th:if="member.hasSubmitted" src="../static/groupmanager/imgs/checkmark-128.png" alt=""
                             th:src="@{/groupmanager/imgs/checkmark-128.png}">
                    </td>
                </tr>
            </table>
        </div>

        <div class="inviteMember">
            <form th:action="${'http://' + link + ':9010/web/groupmanager/invite'}" th:object="${groupAndUserBody}" method="POST">
                <div class="inviteUsername">
                    <input class="username" name="email" type="text" th:field="*{email}" placeholder="user-email" style="border-bottom: none">
                </div>
                <input type="hidden" name="groupId" id="groupId" th:field="*{groupId}">
                <div class="inviteButton">
                    <input type="submit" value="invite someone" id="inviteButton">
                </div>
            </form>
        </div>
    </div>

    <div class="chat">
        <rewe-digital-include th:path="${'http://chat-manager:8040/chat/' + groupId }"></rewe-digital-include>
    </div>

    <div class="shopping-list">
        <rewe-digital-include th:path="${'http://shopping-list-manager:8070/web/shoppingList/' + groupId}"></rewe-digital-include>
    </div>

    <div class="shipping-information">
        <table class="delTable">
            <tr class="delTr">
                <td class="delTd" style="width: 35%">delivery date:</td>
                <td class="delTd" th:text="${date}" style="width: 55%">Mo, 01.01.2020</td>
                <td class="delTd" style="width: 10%">
                    <button class="edit-btn" onclick="openFormDate()">
                            <img class="edit-img" src="../static/groupmanager/imgs/edit.png"
                                 th:src="@{/groupmanager/imgs/edit.png}" alt="+"/>
                    </button>
                </td>
            </tr>
        </table>

        <div class="popup" id="formDate">
            <form th:action="${'http://' + link + ':9010/web/groupmanager/changeDeliveryDate'}" method="POST">
                <input type="hidden" name="groupId" th:value="${groupId}">
                <input class="input" type="text" name="deliveryDate" placeholder="date">
                <button class="popup-btn save" type="submit">Save</button>
                <button class="popup-btn close" type="button" onclick="closeFormDate()">Close</button>
            </form>
        </div>

        <table class="delTable">
            <tr class="delTr">
                <td class="delTd" style="width: 35%">delivery adress:</td>
                <td class="delTd" style="width: 55%">
                    <div th:text="${address.get(1) + ', ' + address.get(0) + ','}">123456, Model City,</div>
                    <div th:text="${address.get(2) + ', ' + address.get(3)}">Modelstreet, 42</div>
                </td>
                <td class="delTd" style="width: 10%">
                    <button class="edit-btn" onclick="openFormAddress()">
                        <img class="edit-img" src="../static/groupmanager/imgs/edit.png"
                             th:src="@{/groupmanager/imgs/edit.png}" alt="+"/>
                    </button>
                </td>
            </tr>
        </table>

        <div class="popup" id="formAddress">
            <form th:action="${'http://' + link + ':9010/web/groupmanager/changeDeliveryAddress'}" method="POST">
                <input type="hidden" name="groupId" th:value="${groupId}">
                <input class="input" type="text" name="deliveryAddress" placeholder="address">
                <button class="popup-btn save" type="submit">Save</button>
                <button class="popup-btn close" type="button" onclick="closeFormAddress()">Close</button>
            </form>
        </div>
    </div>

    <div class="orderButton">
        <input type="button" th:href="${'http://' + link + ':9010/web/groupmanager/changeDeliveryAddress'}" id="orderButton" value="order">
    </div>

    <script>
        function openFormDate() {
            document.getElementById("formDate").style.display = "block";
            closeFormAddress();
        }

        function closeFormDate() {
            document.getElementById("formDate").style.display = "none";
        }

        function openFormAddress() {
            document.getElementById("formAddress").style.display = "block";
            closeFormDate();
        }

        function closeFormAddress() {
            document.getElementById("formAddress").style.display = "none";
        }
    </script>
</body>
</html>